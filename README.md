# glasani.bg

„Гласа ни“ е онлайн платформа за обсъждане на предложения от гражданите.
Някои от тези предложения могат да бъдат предложени за внедряване от
съответните институции с помощта на БЦНП.

## Полезни връзки

stage: [http://promeni.herokuapp.com/](http://promeni.herokuapp.com/)

## Относно

 „Ехо, има ли някой там?“. Този въпрос вероятно ще зададем, ако някой ден отидем на Марс. Сега обаче е важно да знаем – има ли някой тук, има ли граждани в България, които искат да кажат на вземащите решения как да променят държавата, средата. Kаним ви в тази платформа да коментирате какво мислите по въпроси като трябва ли децата да имат предмет гражданско образование, как могат гражданите ефективно да участват при правенето на закони, какво липсва за развитието на истинска доброволческа култура, кой и как да финансира гражданските инициативи. По-важното – ако дадете своите предложения по тези теми – това ще ви направи истински лидери на мнение в дискусията, с пряко участие в бъдещите законодателни инициативи на НПО. Glasani е платформа, в която менението ви е от значение.

## За програмисти

### Инсталация

1. Клонирайте си хранилището и влезте в папката.
2. Създайте си `config/application.yml` файл. Може да използвате примерния в `config/application.yml.example`.
3. `vagrant up`
4. `vagrant ssh` и настройте postgres
5. Сайтът трябва да е достъпен на `localhost:4567`

### Deployment

Инсталацията на приложението в продукционен режим може да се извърши по
много начини. Нашият избор е Capistrano за deployment, PostgreSQL база и Puma в
съчетание с Nginx за application server. Puma процесите се управляват от
[Jungle](https://github.com/puma/puma/tree/master/tools/jungle). Първоначалната
инсталация се прави с помощта на
[Capistrano::Puma](https://github.com/seuros/capistrano-puma).

Освен работеща PostgreSQL база, ще имате нужда и от header-файловете й, за да
може да се инсталира `pg` Ruby библиотеката. На Debian-базирани системи може
да инсталирате `libpq-dev` пакета.

Уверете се, че в environment променливите на потребителя, под чието име пускате
приложението, има `RAILS_ENV=production`.

1. Изпълнете локално `bundle exec cap production deploy:check`. Задачата ще
   създаде необходимите пътища и ще се оплаче, ако липсват необходимите
   конфигурационни файлове. Направете необходимите корекции и се уверете, че
   минава успешно.
2. В `shared/gov_production_nginx.conf` ще е създаден конфигурационен файл за
   Nginx. Може да го активирате като направите symlink към него от
   `/etc/nginx/sites-enabled`.
3. Инсталирайте Puma Jungle. Ако имате `sudo` права, може да използвате
   следната команда: `bundle exec cap production puma:jungle:setup`. Бихте
   могли временно да разрешите на потребител `www-data` да изпълнява sudo
   команди като добавите следното в `/etc/sudoers`:

        www-data    ALL=(ALL:ALL) NOPASSWD: ALL

   В противен случай, трябва да изпълните ръчно стъпките по инсталация, описани
   [в тази задача](https://github.com/seuros/capistrano-puma/blob/master/lib/capistrano/tasks/jungle.cap).
4. Трябва да може да се осъществи връзка с базата данни, конфигурирана в
   `shared/config/database.yml`.
5. Качете приложението с `bundle exec cap production deploy`.
6. На сървъра изпълнете `service nginx reload`.

### API

TBD

