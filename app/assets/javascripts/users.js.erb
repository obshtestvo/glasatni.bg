promeni.controller("UserShowController", ["$scope", "$routeParams", "$http", function($scope, $routeParams, $http) {

  $scope.proposals = [];
  $scope.comments = [];

  $http.get("/api/v1/users/" + $routeParams.id).success(function(user) {
    $scope.user = user;
  });

  $http.get("/api/v1/proposals?user_id=" + $routeParams.id).success(function(data) {
    $scope.proposals = data.proposals;
    $scope.proposalsCount = data.proposals_count;
  });

  $http.get("/api/v1/comments?user_id=" + $routeParams.id).success(function(data) {
    $scope.comments = data.comments;
    $scope.commentsCount = data.comments_count;
  });

}]);

promeni.controller("UserIndexController", ["$scope", "$routeParams", "$http", function($scope, $routeParams, $http) {

  $scope.rank = $routeParams.rank;

  $http.get("/api/v1/users?rank=" + $routeParams.rank).success(function(data) {
    $scope.users = data.users;
    $scope.usersCount = data.users_count;
  });

}]);

promeni.directive("userButton", [function() {
  return {
    restrict: "E",
    templateUrl: "<%= asset_path('user_button.html') %>",
    scope: {
      user: "="
    }
  }
}]);

